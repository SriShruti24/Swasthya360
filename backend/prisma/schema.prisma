datasource db {
  provider = "postgresql" // or "mysql" or "sqlite"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model User {
  id                 String          @id @default(cuid())
  email              String?       @unique
  name               String?
  password           String?
  age                Int?
  phone             BigInt?
  
  gender             String?
  location           String?
  emergencyContact   String?
  preferredLanguage  String  @default("English")
  medicalCondition   String
  allergies          allergies[]
  currentMedication  String
  createdAt          DateTime        @default(now())
  updatedAt          DateTime        @updatedAt

  // Relations
  chatHistories      ChatHistory[]
  medicalConditions MedicalCondition[]
  vaccinationReports VaccinationReport[]
}
model allergies{
  id    String @id @default(cuid())
  name  String?
  userId String
  user   User @relation(fields: [userId], references: [id])
}
model MedicalCondition{
  id    String @id @default(cuid())
  name  String?
  userId String
  user   User @relation(fields: [userId], references: [id]) 
}
model ChatHistory {
  id        String   @id @default(cuid())
  message   String
  sender    Sender
  timestamp DateTime @default(now())

  // Relations
  userId    String
  user      User     @relation(fields: [userId], references: [id])
}

model VaccinationReport {
  id              String   @id @default(cuid())
  vaccineName     String
  dateAdministered DateTime
  notes           String?

  
  userId          String
  user            User     @relation(fields: [userId], references: [id])
}

enum Sender {
  USER
  AGENT
}